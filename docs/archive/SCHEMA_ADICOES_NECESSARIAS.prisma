// üìù ADI√á√ïES NECESS√ÅRIAS AO SCHEMA EXISTENTE
// Apenas EXPANDIR 3 tabelas existentes - ZERO tabelas novas!

// ============================================
// 1. EXPANDIR ConversaParticipante (para funcionalidade de contatos)
// ============================================

// Adicionar ao model ConversaParticipante existente (linha 383):
/*
model ConversaParticipante {
  // ... campos existentes ...
  
  // NOVOS CAMPOS:
  bloqueado    Boolean  @default(false)  // Bloquear contato
  favorito     Boolean  @default(false)  // Marcar como favorito
  apelidoLocal String?  @db.VarChar(100) // Apelido personalizado
}
*/

// ============================================
// 2. EXPANDIR TABELA EMPRESTIMO (Adicionar campos)
// ============================================

// Adicionar ao model Emprestimo existente (linha 761):
/*
model Emprestimo {
  id                 String   @id @default(uuid())
  usuarioId          String
  
  // NOVOS CAMPOS A ADICIONAR:
  tipo               String?  @db.VarChar(20)       // 'loan', 'advance'
  empregadoId        String?                        // Quem solicitou
  aprovadoPor        String?  @db.VarChar(255)      // Quem aprovou
  justificativa      String?  @db.Text              // Motivo do empr√©stimo
  taxaJuros          Decimal  @default(0) @db.Decimal(5, 2) // Taxa de juros
  dataSolicitacao    DateTime @default(now())       // Quando foi solicitado
  dataAprovacao      DateTime?                      // Quando foi aprovado
  motivoRejeicao     String?  @db.Text              // Se rejeitado, motivo
  
  // CAMPOS EXISTENTES (manter):
  valor              Decimal  @db.Decimal(10, 2)
  valorParcela       Decimal  @db.Decimal(10, 2)
  quantidadeParcelas Int
  parcelasPagas      Int      @default(0)
  dataConcessao      DateTime @db.Date
  dataVencimento     DateTime @db.Date
  status             String   @db.VarChar(50)
  observacao         String?
  criadoEm           DateTime @default(now())
  atualizadoEm       DateTime @updatedAt
  
  // RELA√á√ïES:
  usuario            Usuario  @relation("EmprestimosEmpregador", fields: [usuarioId], references: [id], onDelete: Cascade)
  empregado          Usuario? @relation("EmprestimosEmpregado", fields: [empregadoId], references: [id], onDelete: Cascade) // NOVA
  
  @@index([usuarioId])
  @@index([empregadoId]) // NOVO
  @@index([status])
  @@map("emprestimos")
}
*/

// ============================================
// 3. ATUALIZAR MODEL USUARIO (Adicionar rela√ß√µes)
// ============================================

// Adicionar ao model Usuario existente (linha 11):
/*
model Usuario {
  // ... campos existentes ...
  
  // NOVAS RELA√á√ïES A ADICIONAR:
  contatosUsuario       Contato[]  @relation("ContatosUsuario")
  contatosDeUsuario     Contato[]  @relation("ContatosDeUsuario")
  emprestimosSolicitados Emprestimo[] @relation("EmprestimosEmpregado") // Nova rela√ß√£o
  
  // ... rela√ß√µes existentes ...
}
*/

// ============================================
// 1.5 EXPANDIR MembroFamilia (para contatos externos)
// ============================================

// Adicionar ao model MembroFamilia existente (linha 1053):
/*
model MembroFamilia {
  // ... campos existentes ...
  
  // NOVOS CAMPOS:
  avatar           String?  @db.VarChar(255)  // Avatar personalizado
  favorito         Boolean  @default(false)   // Marcar como favorito
  bloqueado        Boolean  @default(false)   // Bloquear contato
  usuarioVinculado String?                    // Link para Usuario se cadastrar
  
  // NOVA RELA√á√ÉO:
  usuarioRef       Usuario? @relation("MembrosFamiliaVinculados", fields: [usuarioVinculado], references: [id], onDelete: SetNull)
}
*/

// ============================================
// RESUMO DAS MUDAN√áAS
// ============================================

/*
TOTAL DE MUDAN√áAS:
1. ‚ùå ZERO tabelas novas (removido Contato)
2. ‚úÖ 3 campos novos em ConversaParticipante
3. ‚úÖ 4 campos novos em MembroFamilia
4. ‚úÖ 8 campos novos em Emprestimo
5. ‚úÖ 1 rela√ß√£o nova em MembroFamilia
6. ‚úÖ 1 rela√ß√£o nova em Usuario (empr√©stimos)

TABELAS EXISTENTES A USAR (N√ÉO CRIAR):
‚úÖ Conversa (comunica√ß√£o)
‚úÖ ConversaParticipante (participantes)
‚úÖ Mensagem (mensagens)
‚úÖ MensagemAnexo (anexos de mensagens)
‚úÖ MensagemLeitura (controle de leitura)
‚úÖ MensagemReacao (rea√ß√µes com emojis)
‚úÖ Tarefa (tarefas)
‚úÖ TarefaAnexo (anexos de tarefas)
‚úÖ TarefaComentario (coment√°rios de tarefas)
‚úÖ TarefaDependencia (depend√™ncias entre tarefas)
‚úÖ Emprestimo (empr√©stimos - expandir)
‚úÖ MetricaSistema (m√©tricas do dashboard)
‚úÖ EstatisticaSistema (estat√≠sticas do sistema)
‚úÖ FolhaPagamento (folha de pagamento)
‚úÖ Documento (documentos)
*/

